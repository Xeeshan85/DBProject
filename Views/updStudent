<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Registration</title>
    <style>
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>Student Registration Form</h1>
    <form action="/studentForm" method="post" onsubmit="return validateForm()">
        <div>
            <label for="name">Full Name:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div>
            <label for="roll_number">Roll Number:</label>
            <input type="text" id="roll_number" name="roll_number" required>
        </div>
        <div>
            <label for="department">Department:</label>
            <select id="department" name="department" required>
                <option value="">Select Department</option>
                <option value="AI">Artificial Intelligence (AI)</option>
                <option value="CS">Computer Science (CS)</option>
                <option value="SE">Software Engineering (SE)</option>
                <option value="DS">Data Science (DS)</option>
            </select>
        </div>
        <div>
            <label for="dietary_preferences">Dietary Preferences:</label>
            <input type="text" id="dietary_preferences" name="dietary_preferences">
        </div>
        <div>
            <label for="registration_option">Registration Option:</label>
            <select id="registration_option" name="registration_option">
                <option value="coming">Coming</option>
                <option value="not coming">Not Coming</option>
            </select>
        </div>
        <div>
            <label for="family_members">Number of Family Members:</label>
            <select id="family_members" name="family_members">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </div>
        <div id="family_members_fields">
            <!-- Family members input fields will be inserted here based on selection -->
            <div id="family_member_1" class="hidden">
                <label for="family_member_1_name">Family Member 1 Name:</label>
                <input type="text" id="family_member_1_name" name="family_member_1_name">
                <label for="family_member_1_contact">Family Member 1 Contact:</label>
                <input type="text" id="family_member_1_contact" name="family_member_1_contact">
                <label for="family_member_1_cnic">Family Member 1 CNIC:</label>
                <input type="text" id="family_member_1_cnic" name="family_member_1_cnic">
            </div>
            <div id="family_member_2" class="hidden">
                <label for="family_member_2_name">Family Member 2 Name:</label>
                <input type="text" id="family_member_2_name" name="family_member_2_name">
                <label for="family_member_2_contact">Family Member 2 Contact:</label>
                <input type="text" id="family_member_2_contact" name="family_member_2_contact">
                <label for="family_member_2_cnic">Family Member 2 CNIC:</label>
                <input type="text" id="family_member_2_cnic" name="family_member_2_cnic">
            </div>
            <div id="family_member_3" class="hidden">
                <label for="family_member_3_name">Family Member 3 Name:</label>
                <input type="text" id="family_member_3_name" name="family_member_3_name">
                <label for="family_member_3_contact">Family Member 3 Contact:</label>
                <input type="text" id="family_member_3_contact" name="family_member_3_contact">
                <label for="family_member_3_cnic">Family Member 3 CNIC:</label>
                <input type="text" id="family_member_3_cnic" name="family_member_3_cnic">
            </div>
        </div>
        <input type="hidden" name="userType" value="student">
        <button type="submit">SUBMIT</button>
    </form>

    <script>
        function validateForm() {
            var familyMembers = parseInt(document.getElementById('family_members').value);

            // Validate family member fields based on selected number of family members
            for (var i = 1; i <= 3; i++) {
                if (i <= familyMembers) {
                    var nameField = document.getElementById('family_member_' + i + '_name').value;
                    var contactField = document.getElementById('family_member_' + i + '_contact').value;
                    var cnicField = document.getElementById('family_member_' + i + '_cnic').value;

                    // Check if name is non-numeric
                    if (!isNaN(nameField)) {
                        alert('Family Member ' + i + ' Name should not be numeric');
                        return false;
                    }

                    // Check if contact is numeric and 11 digits
                    if (isNaN(contactField) || contactField.length !== 11) {
                        alert('Family Member ' + i + ' Contact should be numeric and 11 digits');
                        return false;
                    }

                    // Check if CNIC is numeric and 13 digits
                    if (isNaN(cnicField) || cnicField.length !== 13) {
                        alert('Family Member ' + i + ' CNIC should be numeric and 13 digits');
                        return false;
                    }
                }
            }

            return true; // Form submission allowed
        }

        document.getElementById('family_members').addEventListener('change', function() {
            var numFamilyMembers = parseInt(this.value);
            var familyMembersFields = document.getElementById('family_members_fields').children;
            
            // Hide all family member fields
            for (var i = 0; i < familyMembersFields.length; i++) {
                familyMembersFields[i].classList.add('hidden');
            }

            // Show family member fields based on selection
            for (var i = 1; i <= numFamilyMembers; i++) {
                document.getElementById('family_member_' + i).classList.remove('hidden');
            }
        });

        document.getElementById('registration_option').addEventListener('change', function() {
            var registration_option_value = this.value;
            if (registration_option_value === 'coming') {
                document.getElementById('registration_status').value = 'true';
            } else {
                document.getElementById('registration_status').value = 'false';
            }
        });

        // Initially, show family member fields based on the selected number of family members
        var initialFamilyMembers = parseInt(document.getElementById('family_members').value);
        var initialFamilyMembersFields = document.getElementById('family_members_fields').children;
        
        // Hide all family member fields initially
        for (var i = 0; i < initialFamilyMembersFields.length; i++) {
            initialFamilyMembersFields[i].classList.add('hidden');
        }

        // Show family member fields based on initial selection
        for (var i = 1; i <= initialFamilyMembers; i++) {
            document.getElementById('family_member_' + i).classList.remove('hidden');
        }
    </script>
</body>
</html>
